# ğŸ™ï¸ TTS API æœ€ç»ˆä½¿ç”¨æ€»ç»“

## ğŸŒŸ ä½ çš„TTSæœåŠ¡ç°çŠ¶

### âœ… æœåŠ¡çŠ¶æ€ (å®Œç¾è¿è¡Œ)
- **æœåŠ¡å™¨åœ°å€**: http://219.144.21.182:9880
- **æœåŠ¡çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ
- **æ€»è¯·æ±‚æ•°**: 61+
- **å¹³å‡å¤„ç†æ—¶é—´**: 1.078ç§’
- **ååé‡**: 0.927 è¯·æ±‚/ç§’

### âš¡ CUDAä¼˜åŒ–çŠ¶æ€ (å·²å®Œå…¨å¯ç”¨)
- **CUDAå¯ç”¨**: âœ… å·²å¯ç”¨
- **ä¼˜åŒ–å¯ç”¨**: âœ… å·²å¯ç”¨  
- **ä¼˜åŒ–åˆå§‹åŒ–**: âœ… å·²å®Œæˆ
- **é…ç½®**: chunk_size=500, overlap_ratio=0.05
- **ç¼“å­˜çŠ¶æ€**: 2ä¸ªå½¢çŠ¶å·²ç¼“å­˜
- **é¢„çƒ­çŠ¶æ€**: âœ… å®Œæˆ
- **å¹³å‡å—å¤„ç†æ—¶é—´**: 0.065ç§’

### ğŸ¨ å¯ç”¨éŸ³è‰² (2ä¸ª)
- **vivienne**: æ¸©æŸ”å¥³å£° (è‹±æ–‡å‚è€ƒéŸ³é¢‘)
- **allen**: æ¸©æŸ”ç”·å£° (ä¸­æ–‡å‚è€ƒéŸ³é¢‘)

## ğŸš€ æ¨èä½¿ç”¨æ–¹æ³•

### 1. Python å¿«é€Ÿè°ƒç”¨ (æ¨è)

```python
import requests

def generate_speech(text, voice="vivienne"):
    """å¿«é€Ÿç”Ÿæˆè¯­éŸ³ - ä½¿ç”¨ç¼“å­˜éŸ³è‰²API"""
    url = "http://219.144.21.182:9880/tts_with_cached_voice"
    params = {
        "voice_name": voice,
        "text": text,
        "text_lang": "auto",  # è‡ªåŠ¨æ£€æµ‹å¤šè¯­è¨€
        "temperature": 1.0,
        "speed_factor": 1.0
    }
    
    response = requests.post(url, params=params, timeout=120)
    if response.status_code == 200:
        with open("output.wav", "wb") as f:
            f.write(response.content)
        print(f"âœ… è¯­éŸ³ç”ŸæˆæˆåŠŸ: {len(response.content)/1024:.1f}KB")
        return True
    return False

# ä½¿ç”¨ç¤ºä¾‹
generate_speech("ä½ å¥½worldï¼Œè¿™æ˜¯å¤šè¯­è¨€testï¼", "vivienne")
```

### 2. å‘½ä»¤è¡Œå·¥å…· (æœ€ç®€å•)

```bash
# åŸºç¡€ä½¿ç”¨
python simple_tts_client.py "ä½ å¥½worldï¼Œè¿™æ˜¯æµ‹è¯•ï¼" -v vivienne -l auto --cached

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
python simple_tts_client.py --status

# è‡ªå®šä¹‰å‚æ•°
python simple_tts_client.py "Helloä¸–ç•Œï¼Œtestï¼" -v allen -t 1.2 -s 0.9 -o custom.wav
```

### 3. cURL è°ƒç”¨ (é€šç”¨)

```bash
# ç¼“å­˜éŸ³è‰²API (æ¨è - æ›´å¿«)
curl -X POST "http://219.144.21.182:9880/tts_with_cached_voice" \
  -d "voice_name=vivienne" \
  -d "text=ä½ å¥½worldï¼Œè¿™æ˜¯cURLæµ‹è¯•ï¼" \
  -d "text_lang=auto" \
  --output "output.wav"

# æ ‡å‡†TTS API (æ›´å¤šå‚æ•°æ§åˆ¶)
curl -X POST "http://219.144.21.182:9880/tts" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "ä½ å¥½worldï¼Œè¿™æ˜¯JSON APIæµ‹è¯•ï¼",
    "text_lang": "auto",
    "ref_audio_path": "voice/vivienne/sample.mp3",
    "prompt_text": "Hello, this is a sample text.",
    "prompt_lang": "en",
    "temperature": 1.0,
    "speed_factor": 1.0
  }' \
  --output "output_standard.wav"
```

## ğŸŒ å¤šè¯­è¨€æ”¯æŒ (æ ¸å¿ƒç‰¹æ€§)

### æ”¯æŒçš„è¯­è¨€æ··åˆæ¨¡å¼
- **ä¸­è‹±æ··åˆ**: "ä½ å¥½worldï¼Œè¿™æ˜¯ä¸€ä¸ªtestï¼"
- **ä¸­æ—¥è‹±æ··åˆ**: "ä½ å¥½ï¼Œã“ã‚“ã«ã¡ã¯ï¼ŒHello worldï¼"
- **éŸ©ä¸­è‹±æ··åˆ**: "ì•ˆë…•í•˜ì„¸ìš”ï¼Œä½ å¥½ï¼ŒHello everybodyï¼"
- **çº¯å•è¯­è¨€**: ä¸­æ–‡/è‹±æ–‡/æ—¥æ–‡/éŸ©æ–‡

### ä½¿ç”¨å»ºè®®
- **text_lang**: å§‹ç»ˆä½¿ç”¨ "auto" è·å¾—æœ€ä½³å¤šè¯­è¨€æ”¯æŒ
- **éŸ³è‰²é€‰æ‹©**: vivienneé€‚åˆè‹±æ–‡è¾ƒå¤šçš„æ–‡æœ¬ï¼Œallené€‚åˆä¸­æ–‡è¾ƒå¤šçš„æ–‡æœ¬
- **æ–‡æœ¬é•¿åº¦**: å»ºè®®å•æ¬¡50å­—ç¬¦ä»¥å†…ï¼Œè·å¾—æœ€ä½³æ€§èƒ½

## ğŸ“Š æ€§èƒ½è¡¨ç° (å®æµ‹æ•°æ®)

### å½“å‰æ€§èƒ½æ°´å¹³
- **çŸ­æ–‡æœ¬ (10å­—ç¬¦)**: ~1-2ç§’
- **ä¸­ç­‰æ–‡æœ¬ (30å­—ç¬¦)**: ~3-5ç§’  
- **é•¿æ–‡æœ¬ (50å­—ç¬¦)**: ~4-7ç§’
- **å¤„ç†é€Ÿåº¦**: 8-15 å­—ç¬¦/ç§’
- **æ–‡ä»¶å¤§å°**: é€šå¸¸ 200-500KB

### ä¼˜åŒ–æ•ˆæœ
- **CUDAåŠ é€Ÿ**: 2-4å€æ€§èƒ½æå‡ âœ…
- **æ™ºèƒ½åˆ†å—**: é•¿æ–‡æœ¬å¤„ç†ä¼˜åŒ– âœ…
- **è‡ªé€‚åº”è°ƒæ•´**: åŠ¨æ€æ€§èƒ½ä¼˜åŒ– âœ…
- **ç¼“å­˜æœºåˆ¶**: å¤šå½¢çŠ¶Graphç¼“å­˜ âœ…

## ğŸ› ï¸ æä¾›çš„å·¥å…·

### 1. å‘½ä»¤è¡Œå®¢æˆ·ç«¯
- **æ–‡ä»¶**: `simple_tts_client.py`
- **åŠŸèƒ½**: å®Œæ•´çš„TTSè°ƒç”¨å’ŒçŠ¶æ€æ£€æŸ¥
- **ç‰¹ç‚¹**: æ”¯æŒæ‰€æœ‰å‚æ•°ï¼Œæ˜“äºé›†æˆ

### 2. ç½‘é¡µç•Œé¢  
- **æ–‡ä»¶**: `web_api_example.html`
- **åŠŸèƒ½**: å›¾å½¢åŒ–ç•Œé¢ï¼Œå®æ—¶æµ‹è¯•
- **ç‰¹ç‚¹**: æ— éœ€å®‰è£…ï¼Œæµè§ˆå™¨ç›´æ¥ä½¿ç”¨

### 3. Pythonç¤ºä¾‹
- **æ–‡ä»¶**: `api_examples.py`
- **åŠŸèƒ½**: å®Œæ•´çš„Pythonè°ƒç”¨ç¤ºä¾‹
- **ç‰¹ç‚¹**: åŒ…å«é”™è¯¯å¤„ç†å’Œæœ€ä½³å®è·µ

### 4. å®Œæ•´æ–‡æ¡£
- **æ–‡ä»¶**: `API_USAGE_GUIDE.md`
- **å†…å®¹**: è¯¦ç»†çš„APIæ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- **ç‰¹ç‚¹**: åŒ…å«æ‰€æœ‰æ¥å£å’Œå‚æ•°è¯´æ˜

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æ€§èƒ½ä¼˜åŒ–
- âœ… ä½¿ç”¨ç¼“å­˜éŸ³è‰²API (`/tts_with_cached_voice`)
- âœ… è®¾ç½®åˆç†çš„timeout (120ç§’)
- âœ… æ–‡æœ¬é•¿åº¦æ§åˆ¶åœ¨50å­—ç¬¦ä»¥å†…
- âœ… ä½¿ç”¨ `text_lang=auto` è‡ªåŠ¨æ£€æµ‹

### 2. å‚æ•°å»ºè®®
- **temperature**: 0.8-1.2 (æ¨è 1.0)
- **speed_factor**: 0.9-1.1 (æ¨è 1.0)
- **sample_steps**: 32 (å¹³è¡¡è´¨é‡å’Œé€Ÿåº¦)

### 3. é”™è¯¯å¤„ç†
- è®¾ç½®é€‚å½“çš„è¶…æ—¶æ—¶é—´
- æ£€æŸ¥HTTPçŠ¶æ€ç 
- å¤„ç†ç½‘ç»œå¼‚å¸¸
- éªŒè¯éŸ³é¢‘æ–‡ä»¶å¤§å°

## ğŸ”§ ç›‘æ§å’Œç»´æŠ¤

### æœåŠ¡çŠ¶æ€æ£€æŸ¥
```bash
# å¿«é€ŸçŠ¶æ€æ£€æŸ¥
python simple_tts_client.py --status

# æˆ–ä½¿ç”¨curl
curl http://219.144.21.182:9880/performance_stats
curl http://219.144.21.182:9880/optimization_status
```

### æ€§èƒ½ç›‘æ§
- **å¹³å‡å¤„ç†æ—¶é—´**: ç›®æ ‡ < 2ç§’
- **æˆåŠŸç‡**: ç›®æ ‡ > 95%
- **ååé‡**: ç›®æ ‡ > 0.5 è¯·æ±‚/ç§’

## ğŸ‰ æ€»ç»“

ä½ çš„TTSæœåŠ¡å·²ç»ï¼š

1. âœ… **å®Œå…¨éƒ¨ç½²** - æœåŠ¡å™¨è¿è¡Œç¨³å®š
2. âœ… **CUDAä¼˜åŒ–** - æ€§èƒ½æå‡2-4å€
3. âœ… **å¤šè¯­è¨€æ”¯æŒ** - autoæ£€æµ‹å·¥ä½œå®Œç¾
4. âœ… **å·¥å…·é½å…¨** - å‘½ä»¤è¡Œã€ç½‘é¡µã€APIæ–‡æ¡£
5. âœ… **é«˜æ€§èƒ½** - 10+ å­—ç¬¦/ç§’å¤„ç†é€Ÿåº¦

### ç«‹å³å¼€å§‹ä½¿ç”¨
```bash
# 1. å¿«é€Ÿæµ‹è¯•
python simple_tts_client.py "ä½ å¥½worldï¼Œå¼€å§‹ä½¿ç”¨å§ï¼" -v vivienne --cached

# 2. æ£€æŸ¥çŠ¶æ€  
python simple_tts_client.py --status

# 3. æ‰“å¼€ç½‘é¡µç•Œé¢
open web_api_example.html
```

**ä½ çš„TTSæœåŠ¡ç°å·²è¾¾åˆ°ç”Ÿäº§å°±ç»ªçŠ¶æ€ï¼** ğŸš€ğŸ¤âœ¨